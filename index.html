<html>
	<head>
		<meta charset="utf-8">
		<title>Agasha Ratam</title>
		<link rel="stylesheet" href="style.css">
		<script type="text/javascript" src="https://d3js.org/d3.v6.js"></script>
	</head>
	<body>
		<script type="text/javascript">
			var w = 1248;
			var h = 624;

			var picW = 120;
			var picH = 120;
			var picMarginH = 80;
			var textMarginH = 20;
			var marginT = 100;

			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h)

			svg.append("foreignObject")
				.attr("x", picMarginH)
				.attr("y", marginT)
				.attr("width", 120)
				.attr("height", 120)
				.append("xhtml:img")
				.style("border-radius", "50%")
				.attr("width", 120)
				.attr("height", 120)
				.attr("src", "agasha-ratam-picture.jpg")
			/**
			svg.append("image")
				.attr("href", "agasha-ratam-picture.jpg")
				.attr("x", picMarginH)
				.attr("y", marginT)
				.attr("width", 120)
				.attr("height", 120);
			*/

			svg.append("line")
				.attr("id", "panel-separator")
				.attr("x1", picMarginH + picW + picMarginH)
				.attr("y1", 30)
				.attr("x2", picMarginH + picW + picMarginH)
				.attr("y2", h - 30)

			svg.append("text")
				.attr("text-anchor", "middle")
				.attr("dominant-baseline", "central")
				.attr("x", picMarginH + picW / 2)
				.attr("y", marginT + picH + 20)
				.text("Agasha Ratam")

			var foDiv = svg.append("foreignObject")
				.attr("x", textMarginH)
				.attr("y", marginT + picH + 40)
				.attr("width", (picMarginH + picW + picMarginH - textMarginH) - textMarginH)
				.attr("height", (h - 50) - (50 + picH + 20))
				.append("xhtml:div")
			
			foDiv.append("p")
				.html("Agasha is a senior at Yale University majoring in <em>Economics</em> and in <em>Electrical Engineering & Computer Science</em>.")

			foDiv.append("br")
			foDiv.append("p")
				.html("Agasha's academic interests include neural nets and data visualization. In Summer 2019, he interned at Vaillant in Remscheid, Germany, where he used neural nets to predict the remaining useful life of heating devices. Agasha grew up in Jakarta, Indonesia, and is currently located in Boston. Outside of academics, this summer he kept himself busy with long-distance running, cooking, and playing guitar.")

			
			var panelX = picMarginH + picW + picMarginH;
			var panelY = 30;
			var panelW = w - panelX;
			var panelH = (h - 30) - panelY;
			svg.append("text")
				.attr("id", "title")
				.attr("dominant-baseline", "hanging")
				.attr("x", panelX + 20)
				.attr("y", panelY)
				.text("Using Writing Style to Predict Reader Engagement of an Article")

			svg.append("text")
				.attr("id", "subtitle")
				.attr("dominant-baseline", "hanging")
				.attr("x", panelX + 20)
				.attr("y", panelY + 35)
				.text("A Jurist Digital Scholars project")

			var foDiv = svg.append("foreignObject")
				.attr("x", panelX + 20)
				.attr("y", panelY + 35 + 18 + 30)
				.attr("width", 700)
				.attr("height", panelH)
				.append("xhtml:div")
				.attr("id", "main")

			foDiv.append("p")
				.html("The goal of this project is to extract insights from JURISTâ€™s archive of 10,000+ news and commentary articles paired with Google Analytics data to inform legal news writers on how their writing style affects user engagement with their article.")
			foDiv.append("br")
			foDiv.append("p")
				.html("A common goal among news websites is to make articles more accessible to the general public. Beyond the legal news context, websites such as Wikipedia have articles written in <em>Simple English</em>, implementing simple grammar whenever possible with the intention of making the information more accessible to readers. While legal news websites are naturally distinct from sites such as Wikipedia, this project aims to study whether improving aspects of an author's writing style could prompt a higher level of user engagement.") 
			/**
			foDiv.append("br")

			foDiv.append("p")
				.html("The project can be broken down into multiple stages. The relevant data sets are first merged and cleaned. Features including measurements of readability, voice of sentences, and frequencies of certain parts of speech, are then computed. The most useful features are then selected and used to train a feedforward neural network, predicting the user engagement (measured by the page exit rate) of an article. A text editing web tool embedded with the neural network predictions was constructed to help writers assess how wtheir writing style is likely to impact user engagement, based on previous JURIST articles.")
				*/

			/**
			svg.append("rect")
				.attr("class", "border")
				.attr("x", panelX + 50)
				.attr("y", panelY + 250 - 1)
				.attr("width", (panelX + 600 - 50) - (panelX + 50))
				.attr("height", ((panelX + panelH - 50) - (panelX + 50)) / 1.93 + 2)
			*/

			/**
			svg.append("image")
				.attr("href", "screenshot.png")
				.attr("x", panelX + 50)
				.attr("y", panelY + 250)
				.attr("width", (panelX + 600 - 50) - (panelX + 50))
				.attr("height", ((panelX + panelH - 50) - (panelX + 50)) / 1.93);
			*/

			var abcGap = 100;
			var num = 0;
			var center = panelX + abcGap + 365 -  abcGap;

			var circles = svg.append("g")
				.selectAll("circle")
				.data([center - 20, center - 10, center, center + 10, center + 20])
				.enter()
				.append("circle")
				.attr("cx", function(d) {
					return d;
				})
				.attr("cy", panelY + 270 - 10)
				.attr("r", 2.5)
				.attr("stroke", "black")
				.attr("fill", function(d, i) {
					if (i == 0) {
						return "black";
					}
					else {
						return "none";
					}
				});

			/**
			svg.append("rect")
				.attr("class", "border")
				.attr("x", panelX + abcGap)
				.attr("y", panelY + 270)
				.attr("width", (panelX + 730 - abcGap) - (panelX + abcGap))
				.attr("height", 220);
			*/

			var files = ["1.png", "2.png", "3.png", "4.png", "5.png"]

			var imW = (panelX + 730 - abcGap) - (panelX + abcGap);



			var svg2 = svg.append("svg")
				.attr("x", panelX + abcGap)
				.attr("y", panelY + 270)
				.attr("width", (panelX + 730 - abcGap) - (panelX + abcGap))
				.attr("height", 220)

			var imSvg = svg2.append("svg")
						.attr("x", 0)
						.attr("y", 0)
						.attr("width", 5 * imW)
						.attr("height", 220)

			files.forEach(function(d, i) {
				imSvg.append("image")
					.attr("href", d)
					.attr("x", i * imW)
					.attr("y", 0)
					.attr("width", imW)
					.attr("height", 220)
			})

			/**

			var leftIm = svg2.append("image")
				.attr("href", "no_image.png")
				.attr("x", -imW)
				.attr("y", 0)
				.attr("width", imW)
				.attr("height", 220)

			var im = svg2.append("image")
				.attr("href", files[0])
				.attr("alttext", "PNG file not found!")
				.attr("x", 0)
				.attr("y", 0)
				.attr("width", (panelX + 730 - abcGap) - (panelX + abcGap))
				.attr("height", 220);

			var rightI
			*/

			svg.append("rect")
				.attr("fill", "white")
				.attr("x", panelX + abcGap - 21)
				.attr("y", panelY + 380 - 10)
				.attr("width", 20)
				.attr("height", 20)
				.on("click", function() {
					fresh = false;
					if (num > 0) {
						num -= 1;
						rightArrowText.attr("stroke", "green")
						rightArrowText.attr("fill", "green")
						if (num == 0) {
							leftArrowText.attr("stroke", "none")
							leftArrowText.attr("fill", "none")
						}
						//im.attr("href", files[num]
						imSvg.transition()
							.duration(500)
							.attr("x", -num * imW)
						desc.html(descs[num]);

						circles.attr("fill", function(d, i) {
							if (i == num) {
								return "black"
							}
							else {
								return "none"
							}
						})
					}
				})

			var leftArrowText = svg.append("text")
				.attr("stroke", "none")
				.attr("fill", "none")
				.attr("id", "left-arrow-text")
				.attr("class", "arrow-text")
				.attr("text-anchor", "middle")
				.attr("dominant-baseline", "central")
				.attr("x", panelX + abcGap - 20 + 10)
				.attr("y", panelY + 380 - 10 + 10)
				.text("<")

			svg.append("rect")
				.attr("fill", "white")
				.attr("x", panelX + 730 - abcGap + 1)
				.attr("y", panelY + 380 - 10)
				.attr("width", 20)
				.attr("height", 20)
				.on("click", function() {
					fresh = false;
					if (num < 4) {
						num += 1;
						leftArrowText.attr("stroke", "green")
						leftArrowText.attr("fill", "green")
						if (num == 4) {
							rightArrowText.attr("stroke", "none")
							rightArrowText.attr("fill", "none")
						}
						desc.html(descs[num]);
						//im.attr("href", files[num])
						imSvg.transition()
							.duration(500)
							.attr("x", -num * imW)


						circles.attr("fill", function(d, i) {
							if (i == num) {
								return "black"
							}
							else {
								return "none"
							}
						})
					}
				})

			var rightArrowText = svg.append("text")
				.attr("stroke", "green")
				.attr("fill", "green")
				.attr("id", "right-arrow-text")
				.attr("class", "arrow-text")
				.attr("text-anchor", "middle")
				.attr("dominant-baseline", "central")
				.attr("x", panelX + 730 - abcGap + 10)
				.attr("y", panelY + 380 - 10 + 10)
				.text(">")

			/**
			svg.append("rect")
				.attr("class", "border")
				.attr("x", panelX + abcGap)
				.attr("y", panelY + 270)
				.attr("width", (panelX + 730 - abcGap) - (panelX + abcGap))
				.attr("height", 220);
			*/

			console.log(730 - abcGap * 2)

			
			var descs = ["<b>Data cleaning and merging</b><br>XML archives of JURIST news and commentary articles are first parsed, extracting relevant information for each article. These data sets are then merged with the Google Analytics data by matching article titles, aggregating annual analytics data across all years. The output is one table that contains one row per article, and has columns including the article title, article text, tags, and analytics data such as page views and exit rate.", 
						"<b>Data processing</b><br>Each article is then further processed, introducing new variables that will be candidate features for the next step. These variables include those thought to be describe an author's writing style, such as readability, the frequency of adjectives and adverbs, the usage of the passive voice, and so on.", 
						"<b>Feature selection</b><br>We then choose the features that will be the inputs to the neural network by eliminating those that are redundant or add little variance in the data set. Principle component analysis (PCA) was used to summarize eight different measures of readability (Kincaid Grade Level, ARI, Coleman-Liau Index, Flesch Reading Ease, Gunning-Fox Index, Lix, SMOG, Rix) using just one value.", 
						"<b>Neural network training</b><br>The selected features are used as inputs for a feedforward dense neural network. The input layer contains 25 neurons. We used 5 hidden layers with 10 neurons each. Finally, the output layer contains only one neuron: the page exit rate of the article. The performance was compared to a naive recurrent neural network with long short-term memory. The feedforward neural network outperforms the benchmark in terms of the loss function.", 
						"<b>Web tool development</b><br>Finally, a web page was developed to showcase the prediction tool. It is designed for people interested to write for JURIST to edit their article and see how tweaking it changes the prediction of user engagement, based on historical JURIST data. It also displays some of the metrics that are fed into the neural network."]

			var desc = svg.append("foreignObject")
						.attr("x", panelX + abcGap)
						.attr("y", panelY + 500)
						.attr("width", (panelX + 730 - abcGap) - (panelX + abcGap))
						.attr("height", 70)
						.append("xhtml:div")
						.attr("id", "pic-desc")
						.html(descs[0])

			var a = svg.append("a")
				.attr("href", "http://agasharatam.pythonanywhere.com")

			a.append("rect")
				.attr("class", "button")
				.attr("x", panelX + 775)
				.attr("y", panelY + 100)
				.attr("rx", 10)
				.attr("width", 150)
				.attr("height", 40)
			a.append("text")
				.attr("class", "button-text")
				.attr("text-anchor", "middle")
				.attr("dominant-baseline", "central")
				.attr("x", panelX + 775 + 75)
				.attr("y", panelY + 100 + 20)
				.text("Go to tool")

			var a2 = svg.append("a")
				.attr("href", "ratam-jurist-report.pdf")

			a2.append("rect")
				.attr("class", "button")
				.attr("x", panelX + 775)
				.attr("y", panelY + 150)
				.attr("rx", 10)
				.attr("width", 150)
				.attr("height", 40)
			a2.append("text")
				.attr("class", "button-text")
				.attr("text-anchor", "middle")
				.attr("dominant-baseline", "central")
				.attr("x", panelX + 775 + 75)
				.attr("y", panelY + 150 + 20)
				.text("Read full report")

			var fresh = true;

			window.setInterval(function() {
				if(fresh) {
					num = (num + 1) % 5;

					if (num > 0) {
						leftArrowText.attr("stroke", "green")
						leftArrowText.attr("fill", "green")
					}
					else {
						leftArrowText.attr("stroke", "none")
						leftArrowText.attr("fill", "none")
					}
					if (num < 4) {
						rightArrowText.attr("stroke", "green")
						rightArrowText.attr("fill", "green")
					}
					else {
						rightArrowText.attr("stroke", "none")
						rightArrowText.attr("fill", "none")
					}

					imSvg.transition()
						.duration(500)
						.attr("x", -num * imW)
					desc.html(descs[num]);

					circles.attr("fill", function(d, i) {
						if (i == num) {
							return "black"
						}
						else {
							return "none"
						}
					})
				}
			}, 5000)

				

		</script>
	</body>
</html>
